# FileShare 系统操作指南

## 目录

1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [用户操作指南](#用户操作指南)
4. [管理员操作指南](#管理员操作指南)
5. [系统模块说明](#系统模块说明)
6. [常见问题](#常见问题)

---

## 系统概述

FileShare 是一个专为10-50人小团队设计的文件共享系统，支持私有服务器部署，提供文件集中管理、精准权限控制、多端访问等功能。

### 核心特性

- ✅ 私有部署，数据完全自主
- ✅ 多端访问（网页/桌面/移动）
- ✅ 分层空间管理
- ✅ 精准权限控制
- ✅ 文件版本管理
- ✅ 安全加密存储
- ✅ 操作日志审计

---

## 快速开始

### 1. 系统登录

1. 打开浏览器访问系统地址（如：`http://your-server:3000`）
2. 输入用户名和密码
3. 点击"登录"

**默认管理员账号**：
- 用户名：`admin`
- 密码：`admin123`
- ⚠️ 首次登录后请立即修改密码

### 2. 界面导航

系统界面分为三个主要区域：

- **顶部导航栏**：显示系统名称和用户信息
- **左侧菜单**：功能导航
  - 工作台：系统概览
  - 文件管理：管理所有文件
  - 空间管理：管理团队空间
  - 系统管理：仅管理员可见
- **主内容区**：显示当前功能页面

---

## 用户操作指南

### 一、文件管理

#### 1.1 文档与空间的关系

**核心概念**：

文档（文件）与空间是系统中最基本的组织关系：

1. **文档可以属于空间**
   - 每个文档可以关联到一个空间（`space_id`）
   - 文档也可以不关联任何空间（`space_id` 为 NULL），称为"未分类文件"
   - 文档存储在空间的文件夹中，便于分类管理

2. **空间是文档的容器**
   - 空间用于组织和管理相关文档
   - 不同空间可以设置不同的访问权限
   - 空间内可以创建多层文件夹结构

3. **空间类型决定文档可见性**
   - **团队公共空间**：所有成员可见，适合共享文档
   - **部门空间**：部门成员可见，适合部门内部文档
   - **个人空间**：仅自己可见，适合个人文档
   - **项目空间**：项目成员可见，适合项目文档

**文档与空间的关系图**：
```
系统
├── 空间1（团队公共空间）
│   ├── 文件夹A
│   │   ├── 文档1.pdf
│   │   └── 文档2.docx
│   └── 文件夹B
│       └── 文档3.xlsx
├── 空间2（项目空间）
│   └── 文档4.pptx
└── 未分类文件（不归属任何空间）
    ├── 文档5.txt
    └── 文档6.jpg
```

#### 1.2 上传文件

**操作步骤**：
1. 进入"文件管理"页面
2. 点击右上角"上传文件"按钮
3. 选择要上传的文件（支持多选）
4. 等待上传完成

**上传时与空间的关系**：

**方式一：上传到指定空间（推荐）**
- 在空间详情页上传文件，文件自动关联到该空间
- 可以上传到空间的根目录或指定文件夹
- 需要对该空间有 write 权限

**方式二：上传到未分类位置**
- 在"文件管理"页面直接上传，文件不关联任何空间
- 仅管理员和编辑者可以上传到未分类位置
- 未分类文件可以在后续移动到指定空间

**空间选择的影响**：

| 上传方式 | 空间关联 | 权限要求 | 适用场景 |
|---------|---------|---------|---------|
| 在空间内上传 | 自动关联到该空间 | 需要空间 write 权限 | 有明确归属的文档 |
| 文件管理页上传 | 不关联空间（NULL） | 需要 editor/admin 角色 | 临时文件或待分类文档 |

**注意事项**：
- 单文件最大支持 10GB
- 支持断点续传
- 上传大文件时请保持网络连接稳定
- 需要 editor 或 admin 角色才能上传

**权限说明**：
- **管理员**：可以上传到任何空间，也可以上传到未分类位置
- **编辑者**：可以上传到有 write 权限的空间，也可以上传到未分类位置
- **查看者**：无上传权限
- **仅评论者**：无上传权限

**空间权限对上传的影响**：
- 如果上传到指定空间，系统会检查您对该空间的 write 权限
- 如果没有空间权限，上传会被拒绝
- 空间所有者自动拥有所有权限
- 通过空间成员管理添加的成员，根据设置的权限类型决定是否可以上传

#### 1.3 下载文件

**操作步骤**：
1. 在文件列表中找到要下载的文件
2. 点击文件行的"下载"按钮
3. 选择保存位置（现代浏览器支持）
4. 文件开始下载

**下载方式**：
- **现代浏览器**（Chrome/Edge）：会弹出文件保存对话框，可选择保存位置
- **其他浏览器**：文件保存到浏览器默认下载文件夹

**权限说明**：
- 文件创建者：自动拥有下载权限
- 有 read 权限的用户：可以下载
- 如果设置了"禁止下载"权限，只能在线查看

#### 1.4 搜索文件

**操作步骤**：
1. 在文件管理页面顶部搜索框输入关键词
2. 系统自动搜索文件名
3. 查看搜索结果

**高级搜索**：
- 支持文件名模糊匹配
- 支持按文件类型筛选
- 支持按上传时间筛选
- 支持按空间筛选（显示指定空间内的文件）

#### 1.5 文件与空间的关联管理

**查看文件所属空间**：
- 在文件列表中，可以查看文件是否关联到空间
- 关联到空间的文件会显示空间名称
- 未关联空间的文件显示为"未分类"

**移动文件到空间**：
1. 在文件列表中选择要移动的文件
2. 点击"移动到空间"操作
3. 选择目标空间和文件夹
4. 确认移动

**从空间移除文件**：
1. 在空间内找到要移除的文件
2. 点击"移除"操作
3. 文件会从空间移除，但不会删除
4. 文件变为"未分类"状态

**空间对文件访问的影响**：
- 文件继承空间的访问权限
- 如果空间设置了成员权限，只有有权限的成员才能访问空间内的文件
- 未分类文件：创建者和管理员可以访问，其他用户需要单独设置权限

**最佳实践**：
- ✅ 建议将文件上传到对应的空间，便于管理和权限控制
- ✅ 使用空间分类组织文档（如：按项目、部门、类型分类）
- ✅ 定期整理未分类文件，移动到合适的空间
- ✅ 利用空间权限控制文档访问范围
- 支持按上传人筛选
- 结果按相关性排序

#### 1.6 文件操作

**重命名文件**：
1. 点击文件行的"操作"按钮
2. 选择"重命名"
3. 输入新文件名
4. 确认保存

**删除文件**：
1. 点击文件行的"删除"按钮
2. 确认删除
3. 文件将移至回收站

**权限要求**：
- 重命名：需要 write 权限
- 删除：需要 delete 权限
- 文件创建者自动拥有所有权限

### 二、空间管理

#### 2.1 创建空间

**操作步骤**：
1. 进入"空间管理"页面
2. 点击"创建空间"按钮
3. 填写空间信息：
   - 空间名称（必填，2-50字符）
   - 空间类型（必填）
   - 空间描述（可选）
4. 点击"确定"创建

**空间类型说明**：

| 类型 | 说明 | 创建权限 |
|------|------|----------|
| 团队公共空间 | 所有成员可见 | 仅管理员 |
| 部门空间 | 部门成员可见 | 仅管理员 |
| 个人空间 | 仅自己可见 | 所有用户 |
| 项目专属空间 | 项目成员可见 | 所有用户 |

#### 2.2 创建文件夹

**操作步骤**：
1. 进入空间详情页
2. 点击"新建文件夹"按钮
3. 输入文件夹名称
4. 选择父文件夹（可选，创建子文件夹）
5. 确认创建

**权限要求**：
- 需要空间的 write 权限
- 空间所有者自动拥有权限

#### 2.3 空间成员管理

**操作步骤**：
1. 在空间列表中，点击空间的"成员管理"按钮
2. 查看空间成员列表（包括所有者和普通成员）
3. 添加成员：
   - 选择要添加的用户（支持多选）
   - 选择权限类型（查看/编辑/删除/评论/下载，支持多选）
   - 点击"添加"按钮
4. 移除成员：
   - 在成员列表中点击"移除"按钮
   - 确认移除操作

**空间成员关联机制**：

系统通过以下方式关联空间与成员：

1. **空间所有者**（直接关联）
   - 创建空间时自动设置为所有者
   - 所有者自动拥有所有权限
   - 所有者无法被移除

2. **权限表关联**（通过 permissions 表）
   - 资源类型：`resource_type = 'space'`
   - 资源ID：`resource_id = 空间ID`
   - 用户ID：`user_id = 用户ID`
   - 权限类型：`permission_type`（read/write/delete/comment/download）

3. **用户组关联**（通过 user_groups 表）
   - 可以为用户组设置空间权限
   - 用户组成员自动继承组权限

**权限说明**：
- 空间所有者：拥有所有权限，可以管理成员
- 有权限的成员：根据设置的权限类型访问空间
- 无权限的用户：无法看到该空间

**成员管理权限**：
- 只有空间所有者和管理员可以添加/移除成员
- 普通成员无法修改其他成员的权限

#### 2.4 文件夹权限设置

**操作步骤**：
1. 右键点击文件夹
2. 选择"权限设置"
3. 添加用户或用户组
4. 设置权限类型：
   - 读取：查看和下载
   - 写入：上传和修改
   - 删除：删除文件
   - 评论：添加评论
   - 下载：允许下载（可关闭）

**权限继承**：
- 子文件夹默认继承父文件夹权限
- 可以单独设置子文件夹权限
- 文件夹权限可以覆盖空间权限

### 三、文件共享

#### 3.1 创建外部分享链接

**操作步骤**：
1. 选择要分享的文件或文件夹
2. 点击"分享"按钮
3. 配置分享选项：
   - **访问密码**：设置4-16位密码（可选）
   - **允许邮箱**：限制特定邮箱访问（可选）
   - **有效期**：设置7天/30天/自定义
4. 生成分享链接
5. 复制链接发送给他人

**分享配置说明**：
- 默认关闭外部访问
- 可以设置密码保护
- 可以限制访问邮箱
- 可以设置有效期

#### 3.2 访问分享链接

**操作步骤**：
1. 打开分享链接
2. 如设置了密码，输入密码
3. 如限制了邮箱，输入允许的邮箱地址
4. 访问文件

#### 3.3 管理分享

**操作步骤**：
1. 进入"我的分享"页面
2. 查看所有创建的分享链接
3. 可以查看访问记录
4. 可以撤销分享

### 四、文件版本

#### 4.1 查看历史版本

**操作步骤**：
1. 打开文件详情页
2. 点击"版本历史"标签
3. 查看所有历史版本
4. 每个版本显示：
   - 版本号
   - 修改人
   - 修改时间
   - 文件大小

#### 4.2 恢复历史版本

**操作步骤**：
1. 在版本历史中选择要恢复的版本
2. 点击"恢复"按钮
3. 确认恢复
4. 文件将恢复到该版本

**注意事项**：
- 恢复操作会创建新版本
- 历史版本默认保留30天
- 管理员可配置保留天数

### 五、文件评论

#### 5.1 添加评论

**操作步骤**：
1. 打开文件详情页
2. 滚动到评论区域
3. 输入评论内容
4. 可以@其他成员（输入@符号后选择成员）
5. 点击"发送"

#### 5.2 回复评论

**操作步骤**：
1. 在评论下方点击"回复"
2. 输入回复内容
3. 发送回复

#### 5.3 删除评论

- 只能删除自己的评论
- 管理员可以删除所有评论

---

## 管理员操作指南

### 一、用户管理

#### 1.1 创建用户

**操作步骤**：
1. 进入"系统管理" > "用户管理"
2. 点击"创建用户"按钮
3. 填写用户信息：
   - 用户名（必填，3-20字符）
   - 邮箱（必填，邮箱格式）
   - 密码（必填，至少6位）
   - 真实姓名（可选）
   - 角色（默认：查看者）
   - 状态（默认：启用）
4. 点击"确定"创建

**角色说明**：

| 角色 | 权限说明 |
|------|----------|
| 管理员 | 拥有所有权限，包括用户管理、权限配置、系统设置 |
| 编辑者 | 可以上传、修改、删除有权限的文件 |
| 查看者 | 只能查看和下载有权限的文件 |
| 仅评论者 | 只能查看和评论，无法下载或修改 |

#### 1.2 修改用户信息

**操作步骤**：
1. 在用户列表中找到要修改的用户
2. 点击"编辑"按钮
3. 修改用户信息（角色、状态、真实姓名）
4. 保存修改

#### 1.3 启用/禁用用户

**操作步骤**：
1. 在用户列表中找到要操作的用户
2. 点击"启用"或"禁用"按钮
3. 确认操作

**注意事项**：
- 不能禁用自己
- 禁用后用户无法登录

#### 1.4 撤销用户权限

**操作步骤**：
1. 在用户列表中找到要操作的用户
2. 点击"撤销所有权限"按钮
3. 确认操作

**适用场景**：
- 员工离职
- 权限清理
- 安全审计

### 二、权限管理

#### 2.1 设置文件权限

**操作步骤**：
1. 找到要设置权限的文件
2. 点击"权限设置"
3. 添加用户或用户组
4. 选择权限类型（read/write/delete/comment/download）
5. 保存设置

#### 2.2 批量设置权限

**操作步骤**：
1. 选择多个文件或文件夹
2. 点击"批量设置权限"
3. 选择用户或用户组
4. 选择权限类型
5. 保存设置

### 三、系统配置

#### 3.1 查看系统统计

**操作步骤**：
1. 进入"系统管理" > "系统设置"
2. 查看系统统计信息：
   - 用户总数/活跃用户
   - 文件总数/存储空间
   - 空间数量
   - 存储使用情况

#### 3.2 系统配置管理

**可配置项**：
- 版本保留天数（默认30天）
- 回收站保留天数（默认30天）
- 日志保留天数（默认90天）
- 最大文件大小（默认10GB）
- 文件命名规则

#### 3.3 清理回收站

**操作步骤**：
1. 进入"系统管理" > "系统设置"
2. 点击"清理回收站"
3. 确认清理
4. 系统将删除超过保留期的文件

#### 3.4 清理过期版本

**操作步骤**：
1. 进入"系统管理" > "系统设置"
2. 点击"清理过期版本"
3. 确认清理
4. 系统将删除超过保留期的版本

### 四、日志管理

#### 4.1 查看操作日志

**操作步骤**：
1. 进入"系统管理" > "操作日志"
2. 查看所有操作记录
3. 可以按条件筛选：
   - 用户
   - 操作类型
   - 时间范围

#### 4.2 导出日志

**操作步骤**：
1. 在操作日志页面
2. 点击"导出"按钮
3. 选择导出格式（CSV）
4. 下载日志文件

#### 4.3 清理过期日志

**操作步骤**：
1. 在操作日志页面
2. 点击"清理过期日志"
3. 确认清理
4. 系统将删除超过90天的日志

---

## 系统模块说明

### 模块关系图

```
┌─────────────┐
│  用户认证    │ ← 所有模块依赖
└──────┬──────┘
       │
       ├──→ ┌─────────────┐
       │    │  文件管理    │
       │    └──────┬──────┘
       │           │
       │           ├──→ ┌─────────────┐
       │           │    │  加密模块    │
       │           │    └─────────────┘
       │           │
       │           ├──→ ┌─────────────┐
       │           │    │  权限模块    │
       │           │    └──────┬───────┘
       │           │           │
       │           │           ├──→ 空间管理
       │           │           ├──→ 文件分享
       │           │           └──→ 评论模块
       │           │
       │           └──→ ┌─────────────┐
       │                │  日志模块    │
       │                └─────────────┘
       │
       ├──→ ┌─────────────┐
       │    │  用户管理    │
       │    └──────┬──────┘
       │           │
       │           └──→ 权限模块
       │
       └──→ ┌─────────────┐
            │  搜索模块    │
            └─────────────┘
```

### 核心模块说明

#### 1. 用户认证模块
- **功能**：用户登录、注册、Token验证
- **依赖**：无
- **被依赖**：所有业务模块
- **数据表**：users

#### 2. 文件管理模块
- **功能**：文件上传、下载、管理
- **依赖**：认证模块、权限模块、加密模块、日志模块
- **被依赖**：搜索模块、分享模块
- **数据表**：files, file_versions

#### 3. 空间管理模块
- **功能**：空间创建、文件夹管理
- **依赖**：认证模块、权限模块
- **被依赖**：文件管理模块
- **数据表**：spaces, folders

#### 4. 权限控制模块
- **功能**：权限设置、权限检查
- **依赖**：认证模块
- **被依赖**：文件管理、空间管理、分享、评论
- **数据表**：permissions, user_groups, user_group_members

#### 5. 加密模块
- **功能**：文件加密、解密
- **依赖**：无
- **被依赖**：文件管理模块
- **配置**：环境变量

#### 6. 日志模块
- **功能**：操作日志记录、查询、导出
- **依赖**：认证模块
- **被依赖**：所有业务模块
- **数据表**：operation_logs

### 数据流向

#### 文件上传流程
```
用户 → 前端上传 → 后端接收 → 认证验证 → 权限检查 → 文件加密 → 保存文件 → 数据库记录 → 日志记录 → 返回结果
```

#### 文件下载流程
```
用户 → 前端请求 → 后端处理 → 认证验证 → 权限检查 → 读取文件 → 文件解密 → 返回文件 → 日志记录
```

#### 权限检查流程
```
请求 → 检查管理员 → 检查资源所有者 → 检查直接权限 → 检查用户组权限 → 返回权限结果
```

---

## 常见问题

### Q1: 无法上传文件？
**A**: 检查以下几点：
1. 用户角色是否为 editor 或 admin
2. 是否有空间的上传权限
3. 存储目录是否有写权限
4. 磁盘空间是否充足
5. 文件大小是否超过限制

### Q2: 无法下载文件？
**A**: 检查以下几点：
1. 是否是文件创建者（自动拥有权限）
2. 是否有文件的 read 权限
3. 文件是否已被删除
4. 文件路径是否正确

### Q3: 无法创建空间？
**A**: 检查以下几点：
1. 团队/部门空间需要管理员权限
2. 个人/项目空间所有用户都可以创建
3. 空间名称是否符合要求（2-50字符）

### Q4: 权限设置不生效？
**A**: 检查以下几点：
1. 权限是否正确设置
2. 用户是否在正确的用户组中
3. 文件是否在正确的空间中（空间权限会影响文件访问）

### Q5: 文档与空间的关系是什么？
**A**: 
- **文档可以属于空间**：每个文档可以关联到一个空间，也可以不关联任何空间
- **空间是文档的容器**：空间用于组织和管理相关文档，不同空间可以设置不同的访问权限
- **空间类型决定可见性**：团队空间所有成员可见，部门空间部门成员可见，个人空间仅自己可见，项目空间项目成员可见
- **上传时选择空间**：在空间内上传会自动关联，在文件管理页上传不会关联
- **文件继承空间权限**：空间内的文件会继承空间的访问权限，只有有权限的成员才能访问
3. 文件是否在正确的空间中（空间权限会影响文件访问）

### Q5: 文档与空间的关系是什么？
**A**: 
- **文档可以属于空间**：每个文档可以关联到一个空间，也可以不关联任何空间
- **空间是文档的容器**：空间用于组织和管理相关文档，不同空间可以设置不同的访问权限
- **空间类型决定可见性**：团队空间所有成员可见，部门空间部门成员可见，个人空间仅自己可见，项目空间项目成员可见
- **上传时选择空间**：在空间内上传会自动关联，在文件管理页上传不会关联
- **文件继承空间权限**：空间内的文件会继承空间的访问权限，只有有权限的成员才能访问
3. 权限类型是否正确（read/write/delete等）
4. 清除浏览器缓存后重试

### Q5: 文件搜索不到？
**A**: 检查以下几点：
1. 是否有文件的访问权限
2. 搜索关键词是否正确
3. 文件是否已被删除
4. 是否在正确的空间搜索

### Q6: 分享链接无法访问？
**A**: 检查以下几点：
1. 分享链接是否已过期
2. 密码是否正确
3. 邮箱是否在允许列表中
4. 分享是否已被撤销

### Q7: 系统运行缓慢？
**A**: 优化建议：
1. 检查服务器资源使用情况
2. 清理过期文件和版本
3. 优化数据库查询
4. 检查网络连接

### Q8: 如何备份数据？
**A**: 备份方法：
1. 使用系统备份功能：`npm run backup`
2. 手动备份数据库文件：`data/fileshare.db`
3. 备份存储目录：`storage/`
4. 配置自动备份任务

---

## 技术支持

### 获取帮助

- **操作手册**：`docs/user-manual.md`
- **部署文档**：`docs/deployment.md`
- **系统架构**：`docs/system-architecture.md`
- **快速开始**：`QUICKSTART.md`

### 日志查看

- **服务器日志**：查看控制台输出
- **操作日志**：管理后台 > 操作日志
- **错误日志**：检查服务器控制台

### 故障排查

1. 查看服务器日志
2. 检查数据库状态
3. 检查文件存储权限
4. 查看操作日志
5. 检查网络连接

---

## 附录

### 快捷键说明

- 暂无快捷键，所有操作通过界面完成

### 浏览器兼容性

- Chrome 86+（推荐）
- Edge 86+
- Firefox 最新版
- Safari 最新版

### 文件格式支持

- 文档：DOC, DOCX, XLS, XLSX, PPT, PPTX, PDF
- 图片：JPG, PNG, GIF, BMP, WEBP
- 视频：MP4, AVI, MOV, WMV
- 音频：MP3, WAV, AAC
- 压缩：ZIP, RAR, 7Z
- 其他：所有文件格式

---

## 桌面客户端使用指南

FileShare 提供了基于 Electron 的桌面客户端，提供更好的本地文件集成体验。

### 一、安装桌面客户端

#### 1.1 系统要求

- **Windows**: Windows 10 或更高版本
- **macOS**: macOS 10.13 或更高版本
- **Linux**: 支持 AppImage 的主流发行版（Ubuntu、Fedora、Debian 等）

#### 1.2 下载安装包

**方式一：从管理员处获取**
1. 联系系统管理员获取桌面客户端安装包
2. 根据操作系统选择对应版本：
   - **Windows**: `FileShare-Setup-x.x.x.exe`
   - **macOS**: `FileShare-x.x.x.dmg`
   - **Linux**: `FileShare-x.x.x.AppImage`

**方式二：从源码构建**
1. 确保已安装 Node.js 18+ 和 npm
2. 克隆或下载项目源码
3. 安装依赖：`npm install`
4. 构建前端：`npm run client:build`
5. 打包应用：`npm run electron:pack` 或 `npm run electron:build`

#### 1.3 安装步骤

**Windows**:
1. 双击 `FileShare-Setup-x.x.x.exe` 安装包
2. 按照安装向导完成安装
3. 安装完成后，桌面会出现 FileShare 图标
4. 首次运行可能需要管理员权限

**macOS**:
1. 双击 `.dmg` 文件打开磁盘映像
2. 将 FileShare 应用拖拽到应用程序文件夹
3. 在应用程序中找到并启动 FileShare
4. 首次运行可能需要在"系统偏好设置 > 安全性与隐私"中允许运行

**Linux**:
1. 给 AppImage 文件添加执行权限：
   ```bash
   chmod +x FileShare-x.x.x.AppImage
   ```
2. 双击运行或通过终端执行：
   ```bash
   ./FileShare-x.x.x.AppImage
   ```
3. 可选：将 AppImage 移动到 `/opt` 或 `~/Applications` 目录以便管理

### 二、首次使用

#### 2.1 配置服务器地址

1. 首次启动桌面客户端
2. 输入服务器地址（如：`http://your-server:3000`）
3. 点击"连接"

**注意事项**：
- 确保服务器地址正确
- 确保网络连接正常
- 如果使用 HTTPS，请使用 `https://` 协议

#### 2.2 登录账号

1. 输入用户名和密码
2. 可选择"记住密码"（本地加密存储）
3. 点击"登录"

### 三、桌面客户端功能

#### 3.1 文件管理

**上传文件**：
1. 点击"上传"按钮
2. 选择本地文件（支持多选）
3. 选择目标空间和文件夹
4. 等待上传完成

**下载文件**：
1. 在文件列表中选择文件
2. 点击"下载"按钮
3. 选择保存位置（使用系统文件选择对话框）
4. 文件开始下载

**拖拽上传**：
- 支持将本地文件直接拖拽到客户端窗口
- 自动上传到当前选中的空间/文件夹

#### 3.2 系统托盘

**功能说明**：
- 客户端最小化后会显示在系统托盘
- 双击托盘图标可恢复窗口
- 右键托盘图标可快速操作：
  - 显示窗口
  - 退出应用

**使用场景**：
- 后台运行，不占用任务栏
- 快速访问文件
- 接收文件同步通知

#### 3.3 本地文件选择

**优势**：
- 使用系统原生文件选择对话框
- 更好的用户体验
- 支持快速定位本地文件

**使用方式**：
- 上传时：自动弹出系统文件选择对话框
- 下载时：可选择保存位置
- 支持快捷键操作

#### 3.4 离线使用

**说明**：
- 桌面客户端支持离线查看已下载的文件
- 联网后自动同步文件状态
- 支持断点续传

### 四、开发模式

#### 4.1 开发环境使用

如果需要在开发环境中使用桌面客户端：

1. 确保后端服务器运行在 `http://localhost:3000`
2. 确保前端开发服务器运行在 `http://localhost:5173`
3. 启动桌面客户端：
   ```bash
   npm run electron:dev
   ```

**开发模式特性**：
- 自动连接到开发服务器
- 自动打开开发者工具
- 支持热重载

#### 4.2 构建生产版本

**构建步骤**：
1. 构建前端：
   ```bash
   npm run client:build
   ```
2. 打包桌面客户端：
   ```bash
   npm run electron:pack  # 仅打包，不生成安装包
   npm run electron:build # 生成安装包
   ```

**输出位置**：
- 打包文件：`dist-electron/`
- 安装包：根据平台生成对应格式

### 五、常见问题

#### Q1: 桌面客户端无法连接服务器？
**A**: 检查以下几点：
1. 服务器地址是否正确
2. 服务器是否正在运行
3. 网络连接是否正常
4. 防火墙是否阻止连接

#### Q2: 如何更新桌面客户端？
**A**: 
1. 下载新版本安装包
2. 卸载旧版本（可选，新版本会自动覆盖）
3. 安装新版本
4. 重新登录

#### Q3: 桌面客户端占用资源过多？
**A**: 优化建议：
1. 关闭不必要的文件预览
2. 减少同时上传/下载的文件数量
3. 定期清理缓存

#### Q4: 如何设置开机自启动？
**A**: 
- **Windows**: 在设置中启用"开机自启动"
- **macOS**: 系统偏好设置 > 用户与群组 > 登录项
- **Linux**: 添加到启动应用程序列表

#### Q5: 桌面客户端与网页版有什么区别？
**A**: 
- **桌面客户端**：
  - 支持系统托盘
  - 使用系统原生文件对话框
  - 支持离线查看
  - 更好的本地文件集成
  
- **网页版**：
  - 无需安装
  - 跨平台访问
  - 实时更新
  - 适合临时使用

### 六、技术支持

**获取帮助**：
- 查看桌面客户端帮助菜单
- 联系系统管理员
- 查看在线文档

**报告问题**：
- 记录错误信息
- 截图错误界面
- 联系技术支持

---

**文档版本**：v1.1  
**最后更新**：2024年  
**维护者**：FileShare 开发团队

